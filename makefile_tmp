##################################################################
#     ifort -I/usr/local/include  test_local2.f -L/usr/local/lib -lnetcdff -lnetcdf  -lhdf5_hl -lhdf5 -lz        
##################################################################



objects = constants.o   input_parser.o  particle_state.o  \
          physical_fields.o  runtime_tools.o  time_tools.o \
          particles.o  particle_tracking.o  \
          run_context.o  string_tools.o random_numbers.o \
          grid_interpolations.o geometry.o \
	  main_program.o libtime77.a

FC        = ifort
# big_endian needed to read DMI data
FCFLAGS   = -g -e90 -i4 -error_limit 3 -convert big_endian  -check uninit

FPPFLAGS  = -fpp 
LINKFLAGS = -i4 -I/usr/local/include
LINKLIBS  = -L/usr/lib  -L. -ltime77  -L/usr/local/lib -lnetcdff -lnetcdf  -lhdf5_hl -lhdf5 -lz



tracker:     $(objects) 
	$(FC) $(LINKFLAGS) $(objects)  $(LINKLIBS) -o tracker 


FORCE:

libtime77.a:
	cd libtime; tar xvfz libtime.tar.gz; make -f Makefile_adapted_asc libtime77.a; cp libtime77.a ..

# ============== implicit rules ==============

%.o : %.f
	$(FC) -c $(FCFLAGS) $(FPPFLAGS) $< -o $@ 

# ============== module dependeces ==============




grid_tools.o : physical_fields.o constants.o  
main_program.o : input_parser.o time_tools.o run_context.o physical_fields.o particles.o 
particles.o : particle_tracking.o particle_state.o 
particle_state.o : time_tools.o particle_tracking.o physical_fields.o run_context.o input_parser.o 
particle_tracking.o : physical_fields.o run_context.o input_parser.o time_tools.o 
physical_fields.o : time_tools.o constants.o run_context.o input_parser.o 
run_context.o : input_parser.o 
